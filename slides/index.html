<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Apache NiFi Training</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/white.css" id="theme">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h2>Apache NiFi Training</h2>
            <p>
                <img width="348" height="145" data-src="nifi_logo.png">
            </p>
        </section>

        <section>
            <section>
                <h4>What can you expect from the training?</h4>
                <p align="left">Learn:</p>
                <ul>
                    <li>How to create NiFi flows</li>
                    <li>How to transfer data from source to destination</li>
                </ul>
            </section>

            <section>
                <h4>What do I expect from you?</h4>
                <ul>
                    <li class="fragment">Repetition - the only way to mastery</li>
                    <li class="fragment">You won't get it the first time. So ask a lot of questions</li>
                </ul>
            </section>
        </section>

        <section>
          <h4>Prerequisites</h4>
          <ol>
            <li>Apache NiFi (http://bit.ly/2RASI8d)</li>
            <li>Docker (http://dockr.ly/38m5w8C)</li>
            <li>Docker Compose (http://dockr.ly/34avQzn)</li>
            <li>Training Materials (https://github.com/clim/nifi-training)</li>
          </ol>
        </section>

        <section>
            <section>
                <h4>What is Apache NiFi</h4>
                <ul>
                    <li>Designed to automate the flow of data between software systems</li>
                    <li>Based on the "NiagaraFiles" software by NSA</li>
                    <li>An Open Source project part of the Apache Software Foundation</li>
                    <li>Commercial support offered by Hortonworks and Cloudera</li>
                </ul>
            </section>
            <section>
                <img data-src="nifi-toolbar-components.png">
            </section>
        </section>

        <section>
            <h4>Format</h4>
            <ul>
                <li>Scenario</li>
                <li>I will create the NiFi flow</li>
                <li>You will create the NiFi flow</li>
                <li>Summary</li>
            </ul>
        </section>

        <section>
            <section>
                <h4>Exercise 01 - Scenario</h4>
                <p>
                    Transfer a single file from a source folder to a destination folder
                </p>
            </section>

            <section>
                <h4>Exercise 01 - Processors</h4>
                <ul>
                    <li>GetFile - Read data files from source</li>
                    <li>PutFile - Save data files to destination</li>
                </ul>
            </section>

            <section>
                <h4>Exercise 01 - Configure GetFile</h4>
                <p>
                    <img data-src="images/exercise01/01.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - Configure PutFile</h4>
                <p>
                    <img data-src="images/exercise01/02.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - Flow</h4>
                <p>
                    <img data-src="images/exercise01/03.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - Flow</h4>
                <p>
                    <img data-src="images/exercise01/04.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - FlowFile</h4>
                <p>
                    <img data-src="images/exercise01/05.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - FlowFile details</h4>
                <p>
                    <img data-src="images/exercise01/06.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - FlowFile details</h4>
                <p>
                    <img data-src="images/exercise01/07.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - FlowFile details</h4>
                <p>
                    <img data-src="images/exercise01/08.png">
                </p>
            </section>

            <section>
                <h4>Exercise 01 - FlowFile details</h4>
                <p>
                    <img data-src="images/exercise01/09.png">
                </p>
            </section>

            <section>
                <h2>Exercise 01 - Summary</h2>
                <ol>
                    <li>Tour of the NiFi User Interface</li>
                    <li>Terminology</li>
                    <ul>
                        <li>Processors</li>
                        <li>Processor Properties</li>
                        <li>FlowFile</li>
                        <li>Relationships</li>
                        <li>Connections</li>
                    </ul>
                    <li>How to create a processor</li>
                    <li>Acccess the processor documentation</li>
                </ol>

                <p>
                    Documentation: <a href="https://nifi.apache.org/docs.html" target="_blank">https://nifi.apache.org/docs.html</a>
                </p>
            </section>
        </section>

        <section>
            <section>
                <h4>Exercise 02 - Scenario</h4>
                <p>
                    Read data from a CSV file and save it to a MySQL database<br/>
                    <img data-src="images/exercise02/exercise02.png">
                </p>
            </section>
            <section>
                <h4>Exercise 02 - Database Preparation</h4>
                <ol>
                    <li>Database Driver - mysql-connector-java-8.0.16.jar</li>
                    <li>Run the MySQL database instance using Docker</li>
                    <li>Configure DB Controller Service</li>
                </ol>
            </section>
            <section>
                <h4>Exercise 02 - Database Preparation</h4>
                <p>
                    Copy mysql-connector-java-8.0.16.jar to nifi/lib<br/>
                    <img data-src="images/exercise02/01.png"><br/>
                    then restart NiFi
                </p>
            </section>
            <section data-markdown >
                <script type="text/template">
                    #### Exercise 02 - Run the MySQL database instance using Docker

                    ```
                    $ cd exercise02
                    $ docker-compose up -d

                    Creating network "exercise02_nifi" with the default driver
                    Pulling crss_db (mysql:8.0.16)...
                    8.0.16: Pulling from library/mysql
                    fc7181108d40: Downloading [=====>         ]  4.857MB/22.49MB
                    787a24c80112: Download complete
                    a08cb039d3cd: Downloading [==========>    ]  2.735MB/4.501MB
                    4f7d35eb5394: Download complete
                    5aa21f895d95: Download complete
                    f864cfdc0264: Waiting
                    ```
                    What it does: Download MySQL, Run MySQL, Create sample table, Expose port 3306
                </script>
            </section>

            <section>
                <h4>Exercise 02 - Configure DB Controller Service</h4>
                <p>
                    <img data-src="images/exercise02/02.png">
                </p>
            </section>

            <section>
                <h4>Exercise 02 - Configure DB Controller Service</h4>
                <p>
                    <img data-src="images/exercise02/03.png">
                </p>
            </section>

            <section data-markdown >
                <script type="text/template">
                    #### Exercise 02 - Configure DB Controller Service

                    ```
                    1. JDBC URL - jdbc:mysql://localhost:3306/crss_metering
                    2. JDBC Driver Class - com.mysql.cj.jdbc.Driver
                    3. Username: metering
                    4. Password: metering
                    ```
                </script>
            </section>

            <section data-markdown >
                <script type="text/template">
                    #### Exercise 02 - How to stop docker

                    ```
                    $ cd exercise02
                    $ docker-compose down -v

                    Stopping crss_db ... done
                    Removing crss_db ... done
                    Removing network exercise02_nifi
                    ```
                </script>
            </section>

            <section>
                <h4>Flow Details</h4>
                <p>
                    <img data-src="images/exercise02/04.png">
                </p>
            </section>

            <section>
                <h4>GetFile</h4>
                <p>
                    <img data-src="images/exercise02/05.png">
                </p>
            </section>

            <section>
                <h4>PutDatabaseRecord</h4>
                <p>
                    <img data-src="images/exercise02/06.png">
                </p>
            </section>

            <section>
                <h4>Exercise 02 - Summary</h4>
                <ol>
                    <li>Controller Services</li>
                    <li>PutDatabaseRecord Processor</li>
                    <li>CSV Record Reader</li>
                    <li>Use Docker</li>
                    <li>Scheduling</li>
                </ol>
            </section>
        </section>

        <section>
            <section>
                <h4>Exercise 03</h4>
                <p>
                    Read the data from CRSS DB and save it to EMDB
                    <img data-src="images/exercise03/exercise03.png">
                </p>
            </section>
            <section>
                <h4>Processors involved</h4>
                <ol>
                    <li>GenerateTableFetch</li>
                    <li>ExecuteSQL</li>
                    <li>PutDatabaseRecord</li>
                </ol>
            </section>
            <section>
                <h4>Flow Details</h4>
                <img data-src="images/exercise03/04.png">
            </section>
            <section>
                <h4>GenerateTableFetch</h4>
                <img data-src="images/exercise03/01.png">
            </section>
            <section>
                <h4>ExecuteSQL</h4>
                <img data-src="images/exercise03/02.png">
            </section>
            <section>
                <h4>PutDatabaseRecord</h4>
                <img data-src="images/exercise03/03.png">
            </section>
        </section>

        <section>
            <section>
                <h2>Exercise 04</h2>
                <p>
                    Read data from EMDB and save to PW, generate CSV and zip files<br/>
                    <img data-src="images/exercise04/exercise04.png">
                </p>
            </section>
            <section>
                <h4>Flow Details</h4>
                <img data-src="images/exercise04/01.png">
            </section>
            <section>
                <h4>ConvertRecord</h4>
                <img data-src="images/exercise04/02.png">
            </section>
            <section>
                <h4>ControlRate</h4>
                <img data-src="images/exercise04/03.png">
            </section>
            <section>
                <h4>UpdateAttribute - CSV</h4>
                <img data-src="images/exercise04/04.png">
            </section>
            <section>
                <h4>MergeContent</h4>
                <img data-src="images/exercise04/05.png">
            </section>
            <section>
                <h4>UpdateAttribute - ZIP</h4>
                <img data-src="images/exercise04/06.png">
            </section>
        </section>

        <section>
            <section>
                <h4>Exercise 03</h4>
                <p>
                    Read the data from CRSS DB and save it to EMDB
                    <img data-src="images/exercise03/exercise03.png">
                </p>
            </section>
            <section>
                <h4>Processors involved</h4>
                <ol>
                    <li>GenerateTableFetch</li>
                    <li>ExecuteSQL</li>
                    <li>PutDatabaseRecord</li>
                </ol>
            </section>
            <section>
                <h4>Flow Details</h4>
                <img data-src="images/exercise03/04.png">
            </section>
            <section>
                <h4>GenerateTableFetch</h4>
                <img data-src="images/exercise03/01.png">
            </section>
            <section>
                <h4>ExecuteSQL</h4>
                <img data-src="images/exercise03/02.png">
            </section>
            <section>
                <h4>PutDatabaseRecord</h4>
                <img data-src="images/exercise03/03.png">
            </section>
        </section>

        <section>
            <section>
                <h2>Exercise 05</h2>
                <p>
                    Read data from MySQL and save to CouchDB<br/>
                    Read data from CouchDB and save to MySQL<br/>
                    <img data-src="images/exercise05/mysql_couchdb.png">
                </p>
            </section>
        </section>
    </div>

</div>

<script src="js/reveal.js"></script>

<script>
    // More info https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        center: true,
        hash: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
            { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
            { src: 'plugin/highlight/highlight.js', async: true },
            { src: 'plugin/search/search.js', async: true },
            { src: 'plugin/zoom-js/zoom.js', async: true },
            { src: 'plugin/notes/notes.js', async: true }
        ]
    });
</script>

</body>
</html>
